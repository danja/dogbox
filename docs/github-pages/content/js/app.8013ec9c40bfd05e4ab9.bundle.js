/*! For license information please see app.8013ec9c40bfd05e4ab9.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},a=[],s=0;s<t.length;s++){var u=t[s],c=r.base?u[0]+r.base:u[0],l=o[c]||0,d="".concat(c," ").concat(l);o[c]=l+1;var p=n(d),h={css:u[1],media:u[2],sourceMap:u[3],supports:u[4],layer:u[5]};if(-1!==p)e[p].references++,e[p].updater(h);else{var f=i(h,r);r.byIndex=s,e.splice(s,0,{identifier:d,updater:f,references:1})}a.push(d)}return a}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var u=r(t,i),c=0;c<o.length;c++){var l=n(o[c]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}o=u}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var u=this[s][0];null!=u&&(a[u]=!0)}for(var c=0;c<t.length;c++){var l=[].concat(t[c]);r&&a[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},354:t=>{t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(i," */");return[e].concat([o]).join("\n")}return[e].join("\n")}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},659:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},836:(t,e,n)=>{n.d(e,{A:()=>s});var r=n(354),i=n.n(r),o=n(314),a=n.n(o)()(i());a.push([t.id,'/* Reset and base styles */\n* {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n}\n\nbody {\n    font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n    background: linear-gradient(135deg, #1a1a2e, #16213e);\n    color: #e0e0e0;\n    min-height: 100vh;\n    padding: 20px;\n    line-height: 1.6;\n}\n\n/* Container */\n.container {\n    max-width: 1200px;\n    margin: 0 auto;\n    background: rgba(0, 0, 0, 0.4);\n    border-radius: 20px;\n    padding: 30px;\n    backdrop-filter: blur(10px);\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\n}\n\n/* Headings */\nh1 {\n    text-align: center;\n    margin-bottom: 30px;\n    font-size: 2.5em;\n    background: linear-gradient(45deg, #4facfe, #00f2fe);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n}\n\nh3, h4 {\n    margin-bottom: 15px;\n    color: #4facfe;\n    border-bottom: 1px solid rgba(79, 172, 254, 0.3);\n    padding-bottom: 5px;\n}\n\n/* Buttons */\n.button-group {\n    display: flex;\n    justify-content: center;\n    gap: 15px;\n    margin-bottom: 25px;\n    flex-wrap: wrap;\n}\n\nbutton {\n    padding: 12px 24px;\n    border: none;\n    border-radius: 12px;\n    font-size: 16px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    color: white;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n}\n\nbutton:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n}\n\n.start-button {\n    background: linear-gradient(145deg, #3498db, #2980b9);\n}\n\n.start-button:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n}\n\n.test-button {\n    background: linear-gradient(145deg, #9b59b6, #8e44ad);\n}\n\n.test-button:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n}\n\n.preset-buttons {\n    display: flex;\n    justify-content: center;\n    gap: 10px;\n    margin: 20px 0;\n    flex-wrap: wrap;\n}\n\n.preset-btn {\n    background: linear-gradient(145deg, #2ecc71, #27ae60);\n    min-width: 100px;\n}\n\n.play-btn {\n    background: linear-gradient(145deg, #f39c12, #e67e22);\n    min-width: 100px;\n}\n\n.play-btn:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n}\n\n.preset-btn:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n}\n\n/* Control Panels */\n.control-panel {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n    gap: 20px;\n    margin-bottom: 30px;\n}\n\n.control-section {\n    background: rgba(0, 0, 0, 0.2);\n    border-radius: 12px;\n    padding: 15px;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n/* Sliders */\n.slider-group {\n    margin-bottom: 15px;\n}\n\n.slider-label {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 5px;\n    font-size: 14px;\n    color: #bdc3c7;\n}\n\ninput[type="range"] {\n    width: 100%;\n    height: 6px;\n    -webkit-appearance: none;\n    background: rgba(255, 255, 255, 0.1);\n    border-radius: 3px;\n    outline: none;\n    margin: 10px 0;\n}\n\ninput[type="range"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    width: 16px;\n    height: 16px;\n    background: #4facfe;\n    border-radius: 50%;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\ninput[type="range"]:hover::-webkit-slider-thumb {\n    transform: scale(1.2);\n    background: #00f2fe;\n}\n\n/* Status and Debug */\n.status {\n    text-align: center;\n    margin: 20px 0;\n    padding: 10px;\n    border-radius: 8px;\n    background: rgba(0, 0, 0, 0.2);\n    font-weight: 500;\n}\n\n.debug-log {\n    margin-top: 30px;\n    padding: 15px;\n    background: rgba(0, 0, 0, 0.3);\n    border-radius: 8px;\n    max-height: 200px;\n    overflow-y: auto;\n    font-family: monospace;\n    font-size: 14px;\n    line-height: 1.4;\n    color: #bdc3c7;\n}\n\n/* Oscilloscope */\n.oscilloscope {\n    width: 100%;\n    height: 150px;\n    background: rgba(0, 0, 0, 0.5);\n    border-radius: 8px;\n    margin: 20px 0;\n    display: block;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n    .control-panel {\n        grid-template-columns: 1fr;\n    }\n    \n    .button-group {\n        flex-direction: column;\n        align-items: center;\n    }\n    \n    button, .preset-btn {\n        width: 100%;\n        max-width: 300px;\n    }\n}\n',"",{version:3,sources:["webpack://./src/css/index.css"],names:[],mappings:"AAAA,0BAA0B;AAC1B;IACI,sBAAsB;IACtB,SAAS;IACT,UAAU;AACd;;AAEA;IACI,8EAA8E;IAC9E,qDAAqD;IACrD,cAAc;IACd,iBAAiB;IACjB,aAAa;IACb,gBAAgB;AACpB;;AAEA,cAAc;AACd;IACI,iBAAiB;IACjB,cAAc;IACd,8BAA8B;IAC9B,mBAAmB;IACnB,aAAa;IACb,2BAA2B;IAC3B,yCAAyC;AAC7C;;AAEA,aAAa;AACb;IACI,kBAAkB;IAClB,mBAAmB;IACnB,gBAAgB;IAChB,oDAAoD;IACpD,6BAA6B;IAC7B,oCAAoC;IACpC,qBAAqB;AACzB;;AAEA;IACI,mBAAmB;IACnB,cAAc;IACd,gDAAgD;IAChD,mBAAmB;AACvB;;AAEA,YAAY;AACZ;IACI,aAAa;IACb,uBAAuB;IACvB,SAAS;IACT,mBAAmB;IACnB,eAAe;AACnB;;AAEA;IACI,kBAAkB;IAClB,YAAY;IACZ,mBAAmB;IACnB,eAAe;IACf,gBAAgB;IAChB,eAAe;IACf,yBAAyB;IACzB,wCAAwC;IACxC,YAAY;IACZ,yBAAyB;IACzB,qBAAqB;AACzB;;AAEA;IACI,YAAY;IACZ,mBAAmB;AACvB;;AAEA;IACI,qDAAqD;AACzD;;AAEA;IACI,2BAA2B;IAC3B,0CAA0C;AAC9C;;AAEA;IACI,qDAAqD;AACzD;;AAEA;IACI,2BAA2B;IAC3B,0CAA0C;AAC9C;;AAEA;IACI,aAAa;IACb,uBAAuB;IACvB,SAAS;IACT,cAAc;IACd,eAAe;AACnB;;AAEA;IACI,qDAAqD;IACrD,gBAAgB;AACpB;;AAEA;IACI,qDAAqD;IACrD,gBAAgB;AACpB;;AAEA;IACI,2BAA2B;IAC3B,0CAA0C;AAC9C;;AAEA;IACI,2BAA2B;IAC3B,0CAA0C;AAC9C;;AAEA,mBAAmB;AACnB;IACI,aAAa;IACb,2DAA2D;IAC3D,SAAS;IACT,mBAAmB;AACvB;;AAEA;IACI,8BAA8B;IAC9B,mBAAmB;IACnB,aAAa;IACb,wCAAwC;AAC5C;;AAEA,YAAY;AACZ;IACI,mBAAmB;AACvB;;AAEA;IACI,aAAa;IACb,8BAA8B;IAC9B,kBAAkB;IAClB,eAAe;IACf,cAAc;AAClB;;AAEA;IACI,WAAW;IACX,WAAW;IACX,wBAAwB;IACxB,oCAAoC;IACpC,kBAAkB;IAClB,aAAa;IACb,cAAc;AAClB;;AAEA;IACI,wBAAwB;IACxB,WAAW;IACX,YAAY;IACZ,mBAAmB;IACnB,kBAAkB;IAClB,eAAe;IACf,oBAAoB;AACxB;;AAEA;IACI,qBAAqB;IACrB,mBAAmB;AACvB;;AAEA,qBAAqB;AACrB;IACI,kBAAkB;IAClB,cAAc;IACd,aAAa;IACb,kBAAkB;IAClB,8BAA8B;IAC9B,gBAAgB;AACpB;;AAEA;IACI,gBAAgB;IAChB,aAAa;IACb,8BAA8B;IAC9B,kBAAkB;IAClB,iBAAiB;IACjB,gBAAgB;IAChB,sBAAsB;IACtB,eAAe;IACf,gBAAgB;IAChB,cAAc;AAClB;;AAEA,iBAAiB;AACjB;IACI,WAAW;IACX,aAAa;IACb,8BAA8B;IAC9B,kBAAkB;IAClB,cAAc;IACd,cAAc;AAClB;;AAEA,sBAAsB;AACtB;IACI;QACI,0BAA0B;IAC9B;;IAEA;QACI,sBAAsB;QACtB,mBAAmB;IACvB;;IAEA;QACI,WAAW;QACX,gBAAgB;IACpB;AACJ",sourcesContent:['/* Reset and base styles */\n* {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n}\n\nbody {\n    font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n    background: linear-gradient(135deg, #1a1a2e, #16213e);\n    color: #e0e0e0;\n    min-height: 100vh;\n    padding: 20px;\n    line-height: 1.6;\n}\n\n/* Container */\n.container {\n    max-width: 1200px;\n    margin: 0 auto;\n    background: rgba(0, 0, 0, 0.4);\n    border-radius: 20px;\n    padding: 30px;\n    backdrop-filter: blur(10px);\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);\n}\n\n/* Headings */\nh1 {\n    text-align: center;\n    margin-bottom: 30px;\n    font-size: 2.5em;\n    background: linear-gradient(45deg, #4facfe, #00f2fe);\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    background-clip: text;\n}\n\nh3, h4 {\n    margin-bottom: 15px;\n    color: #4facfe;\n    border-bottom: 1px solid rgba(79, 172, 254, 0.3);\n    padding-bottom: 5px;\n}\n\n/* Buttons */\n.button-group {\n    display: flex;\n    justify-content: center;\n    gap: 15px;\n    margin-bottom: 25px;\n    flex-wrap: wrap;\n}\n\nbutton {\n    padding: 12px 24px;\n    border: none;\n    border-radius: 12px;\n    font-size: 16px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.3s ease;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n    color: white;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n}\n\nbutton:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n}\n\n.start-button {\n    background: linear-gradient(145deg, #3498db, #2980b9);\n}\n\n.start-button:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n}\n\n.test-button {\n    background: linear-gradient(145deg, #9b59b6, #8e44ad);\n}\n\n.test-button:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n}\n\n.preset-buttons {\n    display: flex;\n    justify-content: center;\n    gap: 10px;\n    margin: 20px 0;\n    flex-wrap: wrap;\n}\n\n.preset-btn {\n    background: linear-gradient(145deg, #2ecc71, #27ae60);\n    min-width: 100px;\n}\n\n.play-btn {\n    background: linear-gradient(145deg, #f39c12, #e67e22);\n    min-width: 100px;\n}\n\n.play-btn:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n}\n\n.preset-btn:hover:not(:disabled) {\n    transform: translateY(-2px);\n    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);\n}\n\n/* Control Panels */\n.control-panel {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n    gap: 20px;\n    margin-bottom: 30px;\n}\n\n.control-section {\n    background: rgba(0, 0, 0, 0.2);\n    border-radius: 12px;\n    padding: 15px;\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n/* Sliders */\n.slider-group {\n    margin-bottom: 15px;\n}\n\n.slider-label {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 5px;\n    font-size: 14px;\n    color: #bdc3c7;\n}\n\ninput[type="range"] {\n    width: 100%;\n    height: 6px;\n    -webkit-appearance: none;\n    background: rgba(255, 255, 255, 0.1);\n    border-radius: 3px;\n    outline: none;\n    margin: 10px 0;\n}\n\ninput[type="range"]::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    width: 16px;\n    height: 16px;\n    background: #4facfe;\n    border-radius: 50%;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\ninput[type="range"]:hover::-webkit-slider-thumb {\n    transform: scale(1.2);\n    background: #00f2fe;\n}\n\n/* Status and Debug */\n.status {\n    text-align: center;\n    margin: 20px 0;\n    padding: 10px;\n    border-radius: 8px;\n    background: rgba(0, 0, 0, 0.2);\n    font-weight: 500;\n}\n\n.debug-log {\n    margin-top: 30px;\n    padding: 15px;\n    background: rgba(0, 0, 0, 0.3);\n    border-radius: 8px;\n    max-height: 200px;\n    overflow-y: auto;\n    font-family: monospace;\n    font-size: 14px;\n    line-height: 1.4;\n    color: #bdc3c7;\n}\n\n/* Oscilloscope */\n.oscilloscope {\n    width: 100%;\n    height: 150px;\n    background: rgba(0, 0, 0, 0.5);\n    border-radius: 8px;\n    margin: 20px 0;\n    display: block;\n}\n\n/* Responsive Design */\n@media (max-width: 768px) {\n    .control-panel {\n        grid-template-columns: 1fr;\n    }\n    \n    .button-group {\n        flex-direction: column;\n        align-items: center;\n    }\n    \n    button, .preset-btn {\n        width: 100%;\n        max-width: 300px;\n    }\n}\n'],sourceRoot:""}]);const s=a}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var r=n(72),i=n.n(r),o=n(825),a=n.n(o),s=n(659),u=n.n(s),c=n(56),l=n.n(c),d=n(540),p=n.n(d),h=n(113),f=n.n(h),m=n(836),A={};A.styleTagTransform=f(),A.setAttributes=l(),A.insert=u().bind(null,"head"),A.domAPI=a(),A.insertStyleElement=p(),i()(m.A,A),m.A&&m.A.locals&&m.A.locals;class g{constructor(){this.listeners=new Map}on(t,e){return this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(e),()=>{const n=this.listeners.get(t);n&&(n.delete(e),0===n.size&&this.listeners.delete(t))}}emit(t,e){const n=this.listeners.get(t);n&&n.forEach((t=>{try{t(e)}catch(t){}}))}removeAllListeners(t){t?this.listeners.delete(t):this.listeners.clear()}}const y=new g;y.on.bind(y),y.emit.bind(y);var v="note:on",b="note:off",x="param:change",C=new g;function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,I(r.key),r)}}function I(t){var e=function(t){if("object"!=w(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:e+""}var k=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.audioContext=e,this.rd=.8,this.jitter=0,this.shimmer=0,this.f0=220,this.osc=e.createOscillator(),this.osc.type="sawtooth",this.osc.frequency.setValueAtTime(this.f0,e.currentTime),this.gain=e.createGain(),this.gain.gain.value=0,this.osc.connect(this.gain),this.osc.start(),this.gain.gain.value=.5,this.activeNotes=new Map,this.setupEventListeners(),console.log("LFGlottalSource initialized")},e=[{key:"setupEventListeners",value:function(){var t=this;C.on(x,(function(e){var n,r=e.param,i=e.value;try{var o=parseFloat(i),a=t.audioContext.currentTime;switch(r){case"pitch":t.f0=o,t.osc.frequency.cancelScheduledValues(a),t.osc.frequency.setValueAtTime(o,a);break;case"jitter":t.jitter=o;break;case"shimmer":t.shimmer=o;break;case"amp":case"gain":t.gain.gain.cancelScheduledValues(a),t.gain.gain.setValueAtTime(o,a);break;case"amp-attack":case"amp-decay":case"amp-sustain":case"amp-release":null!==(n=t.envelope)&&void 0!==n&&n.setParam&&t.envelope.setParam(r,o)}}catch(t){}})),C.on(v,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.frequency,r=e.velocity,i=void 0===r?.7:r,o=e.time,a=e.id;t.noteOn(o,i,n,a)})),C.on(b,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.time,r=e.id;t.noteOff(n,r)}))}},{key:"setFrequency",value:function(t){this.f0=t,this.osc.frequency.setValueAtTime(t*(1+(2*Math.random()-1)*this.jitter),this.audioContext.currentTime)}},{key:"connect",value:function(t){this.gain.connect(t)}},{key:"disconnect",value:function(){this.gain.disconnect()}},{key:"noteOn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.audioContext.currentTime,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;try{if(!this.audioContext)return void console.error("AudioContext not available");var i=this.audioContext.currentTime,o=Math.max(i,t),a=this.audioContext.createGain();a.gain.value=0,this.osc.disconnect(),this.osc.connect(a),a.connect(this.gain),n?this.setFrequency(n):n=this.f0;var s=1+(2*Math.random()-1)*(this.shimmer||0),u=Math.min(1,e*s);console.log("NoteOn [".concat(r||"unknown","]: time=").concat(t.toFixed(3),", freq=").concat(n,", vel=").concat(e,", amp=").concat(u.toFixed(3))),a.gain.cancelScheduledValues(i),a.gain.setValueAtTime(0,i),o>i?(a.gain.linearRampToValueAtTime(0,o),a.gain.linearRampToValueAtTime(u,o+.01)):a.gain.linearRampToValueAtTime(u,i+.01),r&&this.activeNotes.set(r,{gain:a,startTime:i})}catch(t){console.error("Error in noteOn:",t)}}},{key:"noteOff",value:function(){var t,e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(t=this.audioContext)||void 0===t?void 0:t.currentTime,r=arguments.length>1?arguments[1]:void 0;try{if(!this.audioContext)return void console.error("AudioContext not available in noteOff");var i=this.audioContext.currentTime,o=Math.max(i,n||i);if(r&&this.activeNotes.has(r)){var a=this.activeNotes.get(r).gain.gain,s=a.value;console.log("NoteOff [".concat(r,"]: time=").concat(o.toFixed(3),", currentValue=").concat(s.toFixed(3))),a.cancelScheduledValues(i),a.setValueAtTime(s,i),o>i?(a.linearRampToValueAtTime(s,o),a.linearRampToValueAtTime(0,o+.1)):a.linearRampToValueAtTime(0,i+.1),setTimeout((function(){e.activeNotes.has(r)&&(e.activeNotes.get(r).gain.disconnect(),e.activeNotes.delete(r))}),1e3*(o-i+.15))}else if(!r){var u=this.gain.gain,c=u.value;console.log("NoteOff [all]: time=".concat(o.toFixed(3),", currentValue=").concat(c.toFixed(3))),u.cancelScheduledValues(i),u.setValueAtTime(c,i),u.linearRampToValueAtTime(0,o+.1)}}catch(t){console.error("Error in noteOff:",t)}}}],e&&B(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,T(r.key),r)}}function T(t){var e=function(t){if("object"!=E(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==E(e)?e:e+""}var P=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.audioContext=e,this.bufferSize=4096,this.noiseBuffer=this.createNoiseBuffer(),this.gain=e.createGain(),this.gain.gain.value=0,this.noise=e.createBufferSource(),this.noise.buffer=this.noiseBuffer,this.noise.loop=!0,this.filter=e.createBiquadFilter(),this.filter.type="bandpass",this.filter.frequency.setValueAtTime(1e3,e.currentTime),this.filter.Q.value=1,this.gain.gain.value=0,this.noise.connect(this.filter),this.filter.connect(this.gain),this.noise.start(),this.setupEventListeners()},e=[{key:"setupEventListeners",value:function(){var t=this;C.on(x,(function(e){var n=e.param,r=e.value;try{var i=parseFloat(r),o=t.audioContext.currentTime;switch(n){case"breathiness":case"amp":case"gain":t.gain.gain.cancelScheduledValues(o),t.gain.gain.setValueAtTime(i,o);break;case"noiseColor":t.filter.frequency.cancelScheduledValues(o),t.filter.frequency.setValueAtTime(i,o);break;case"noiseQ":case"q":t.filter.Q.cancelScheduledValues(o),t.filter.Q.setValueAtTime(Math.max(.1,i),o)}}catch(t){}})),C.on(v,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.velocity,r=void 0===n?.5:n,i=e.time;t.noteOn(i,r)})),C.on(b,(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).time;t.noteOff(e)}))}},{key:"createNoiseBuffer",value:function(){for(var t=this.audioContext.createBuffer(1,this.bufferSize,this.audioContext.sampleRate),e=t.getChannelData(0),n=0;n<this.bufferSize;n++)e[n]=2*Math.random()-1;return t}},{key:"setFrequency",value:function(t){this.filter.frequency.setValueAtTime(t,this.audioContext.currentTime)}},{key:"setQ",value:function(t){this.filter.Q.setValueAtTime(t,this.audioContext.currentTime)}},{key:"setLevel",value:function(t){this.gain.gain.setValueAtTime(t,this.audioContext.currentTime)}},{key:"connect",value:function(t){this.gain.connect(t)}},{key:"disconnect",value:function(){this.gain.disconnect()}},{key:"noteOn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.audioContext.currentTime,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=this.audioContext.currentTime,r=Math.max(n,t),i=this.gain.gain;i.cancelScheduledValues(n),i.setValueAtTime(0,n),r>n?(i.linearRampToValueAtTime(0,r),i.linearRampToValueAtTime(e,r+.01)):i.linearRampToValueAtTime(e,n+.01)}},{key:"noteOff",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.audioContext.currentTime,e=this.audioContext.currentTime,n=Math.max(e,t),r=this.gain.gain,i=r.value;r.cancelScheduledValues(e),r.setValueAtTime(i,e),n>e?(r.linearRampToValueAtTime(i,n),r.linearRampToValueAtTime(0,n+.1)):r.linearRampToValueAtTime(0,e+.1)}},{key:"trigger",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.audioContext.currentTime;this.noteOn(n,t),this.noteOff(n+e)}}],e&&S(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function O(t){return function(t){if(Array.isArray(t))return z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return z(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q(r.key),r)}}function q(t){var e=function(t){if("object"!=j(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(e)?e:e+""}var F=function(){return t=function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.audioContext=e,this.filters=[],this.gains=[],this.mix=.5,this.input=this.audioContext.createGain(),this.output=this.audioContext.createGain();for(var r=0;r<4;r++){var i=this.audioContext.createBiquadFilter();i.type="bandpass",i.Q.value=10;var o=this.audioContext.createGain();o.gain.value=.25,i.connect(o),this.filters.push(i),this.gains.push(o)}this.setFormants(800,1200,2500,3500),this.dryGain=this.audioContext.createGain(),this.wetGain=this.audioContext.createGain(),this.filters.forEach((function(t){n.input.connect(t)})),this.gains.forEach((function(t){t.connect(n.wetGain)})),this.input.connect(this.dryGain),this.dryGain.connect(this.output),this.wetGain.connect(this.output),this.setMix(this.mix),this.setupEventListeners()},(e=[{key:"setupEventListeners",value:function(){var t=this;C.on(x,(function(e){var n=e.param,r=e.value;"formants"===n?t.setFormants.apply(t,O(r)):"formantQs"===n?t.setBandwidths.apply(t,O(r)):"filterMix"===n&&t.setMix(r)}))}},{key:"setFormants",value:function(t,e,n,r){var i=this;[t,e,n,r].forEach((function(t,e){i.filters[e]&&i.filters[e].frequency.setValueAtTime(t,i.audioContext.currentTime)}))}},{key:"setBandwidths",value:function(t,e,n,r){var i=this;[t,e,n,r].forEach((function(t,e){i.filters[e]&&i.filters[e].Q.setValueAtTime(i.bwToQ(t),i.audioContext.currentTime)}))}},{key:"bwToQ",value:function(t){Math.PI,this.audioContext.sampleRate;var e=Math.pow(2,t/2);return Math.sqrt(e)/(e-1)}},{key:"setGains",value:function(t,e,n,r){var i=this;[t,e,n,r].forEach((function(t,e){i.gains[e]&&i.gains[e].gain.setValueAtTime(t,i.audioContext.currentTime)}))}},{key:"setMix",value:function(t){this.mix=t;var e=this.audioContext.currentTime;this.dryGain.gain.setValueAtTime(1-t,e),this.wetGain.gain.setValueAtTime(t,e)}},{key:"connect",value:function(t){if(t instanceof AudioNode)this.output.connect(t);else{if(!t._input)throw new Error("Cannot connect to destination: not an AudioNode");this.output.connect(t._input)}return t}},{key:"disconnect",value:function(){this.filters.forEach((function(t){return t.disconnect()})),this.gains.forEach((function(t){return t.disconnect()})),this.dryGain&&this.dryGain.disconnect(),this.wetGain&&this.wetGain.disconnect(),this.mixer&&this.mixer.disconnect()}},{key:"numberOfInputs",get:function(){return 1}},{key:"numberOfOutputs",get:function(){return 1}},{key:"connectInput",value:function(t){this.filters.forEach((function(e){t.connect(e)})),t.connect(this.dryGain)}}])&&V(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function D(t){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},D(t)}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M(r.key),r)}}function M(t){var e=function(t){if("object"!=D(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==D(e)?e:e+""}var N=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.attack=.01,this.decay=.1,this.sustain=.5,this.release=.2,this.setupEventListeners()},(e=[{key:"setupEventListeners",value:function(){var t=this;C.on(x,(function(e){var n=e.param,r=e.value;if(n.startsWith("amp-")){var i=n.split("-")[1];t[i]=r}}))}},{key:"setADSR",value:function(t,e,n,r){this.attack=t,this.decay=e,this.sustain=n,this.release=r}},{key:"applyEnvelope",value:function(t,e,n,r,i,o){var a=t.context.currentTime,s=i+this.attack,u=s+this.decay,c=i+o-this.release;return t.cancelScheduledValues(a),t.setValueAtTime(e,i),t.linearRampToValueAtTime(n,s),t.linearRampToValueAtTime(r,u),c>u&&t.linearRampToValueAtTime(r,c),t.linearRampToValueAtTime(0,i+o),i+o}}])&&L(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function R(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Y(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,U(r.key),r)}}function U(t){var e=function(t){if("object"!=G(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==G(e)?e:e+""}var W=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);try{if(!window.AudioContext&&!window.webkitAudioContext)throw new Error("Web Audio API is not supported in this browser");var e=window.AudioContext||window.webkitAudioContext;this.audioContext=new e,this.envelope=new N,this.glottis=new k(this.audioContext),this.noise=new P(this.audioContext),this.formants=new F(this.audioContext),this.output=this.audioContext.createGain(),this.output.gain.value=.5,this.mixer=this.audioContext.createGain(),this.mixer.gain.value=1,this.glottis.connect(this.mixer),this.noise.connect(this.mixer),this.mixer.connect(this.formants.input),this.formants.connect(this.output),this.output.connect(this.audioContext.destination),this.output.gain.value=.5,this.activeNotes=new Set}catch(t){throw console.error("Error initializing DogSynthesizer:",t),t}this.params={pitch:220,jitter:.05,shimmer:.1,breathiness:.2,noiseColor:1e3,formants:[800,1200,2500,3500],formantQs:[10,8,6,4],"amp-attack":.01,"amp-decay":.1,"amp-sustain":.5,"amp-release":.2},this.updateParams(),this.setupEventListeners(),C.emit("audio:ready")},e=[{key:"setupEventListeners",value:function(){var t=this;C.on(x,(function(e){var n=e.param,r=e.value;t.setParam(n,r)})),C.on("preset:load",(function(e){t.loadPreset(e)}))}},{key:"setParam",value:function(t,e){var n;if(this.params.hasOwnProperty(t))try{var r,i="number"==typeof this.params[t]?parseFloat(e):e,o=this.params[t];if("number"==typeof i&&Math.abs(i-o)<1e-4)return;this.params[t]=i;var a=(null===(r=this.audioContext)||void 0===r?void 0:r.currentTime)||0;switch(t){case"pitch":case"jitter":case"shimmer":this.glottis&&this.glottis.setParam(t,i);break;case"breathiness":case"noiseColor":case"noiseQ":case"q":this.noise&&this.noise.setParam(t,i);break;case"formants":this.formants&&(this.formants.setParam(t,i),this.updateFormants());break;case"amp":case"gain":this.output&&(this.output.gain.cancelScheduledValues(a),this.output.gain.setValueAtTime(i,a));break;default:null!==(n=this.envelope)&&void 0!==n&&n.setParam&&this.envelope.setParam(t,i)}C.emit(x,{param:t,value:i})}catch(t){}}},{key:"updateParams",value:function(){var t=this;Object.entries(this.params).forEach((function(e){var n=R(e,2),r=n[0],i=n[1];t.glottis&&"function"==typeof t.glottis.setParam&&t.glottis.setParam(r,i),t.noise&&"function"==typeof t.noise.setParam&&t.noise.setParam(r,i),t.formants&&"function"==typeof t.formants.setParam&&t.formants.setParam(r,i)})),this.updateFormants()}},{key:"updateFormants",value:function(){C.emit(x,{param:"formants",value:this.params.formants}),C.emit(x,{param:"formantQs",value:this.params.formantQs})}},{key:"loadPreset",value:function(t){var e=this;Object.entries(t).forEach((function(t){var n=R(t,2),r=n[0],i=n[1];e.params.hasOwnProperty(r)&&(e.params[r]=i,C.emit(x,{param:r,value:i}))}))}},{key:"playNote",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7;try{if(!this.audioContext)return void console.error("Cannot play note: AudioContext not available");var r=this.audioContext.currentTime,i=r+Math.max(.1,e),o="".concat(r,"-").concat(Math.random().toString(36).substr(2,9));console.log("Playing note [".concat(o,"]: duration=").concat(e,"s, velocity=").concat(n,", pitch=").concat(this.params.pitch,"Hz")),this.activeNotes.add(o),C.emit(v,{frequency:this.params.pitch,velocity:n,time:r,id:o});var a=setTimeout((function(){t.activeNotes.has(o)&&(C.emit(b,{time:t.audioContext.currentTime,id:o}),t.activeNotes.delete(o))}),1e3*(i-r));this.activeNotes.add({id:o,timeout:a,cancel:function(){return clearTimeout(a)}}),console.log("Scheduled note off [".concat(o,"] at: ").concat(i.toFixed(3),"s"))}catch(t){console.error("Error in playNote:",t)}}},{key:"connect",value:function(t){this.output.connect(t)}},{key:"disconnect",value:function(){this.glottis.disconnect(),this.noise.disconnect(),this.formants.disconnect(),this.output.disconnect()}}],e&&Q(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function _(t){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_(t)}function H(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||Z(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){if(t){if("string"==typeof t)return X(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(t,e):void 0}}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function J(){J=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r})}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(e,n,r,i){var o=n&&n.prototype instanceof p?n:p,a=Object.create(o.prototype);return u(a,"_invoke",function(e,n,r){var i=1;return function(o,a){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===o)throw a;return{value:t,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=x(s,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===i)throw i=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=3;var c=l(e,n,r);if("normal"===c.type){if(i=r.done?4:2,c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=4,r.method="throw",r.arg=c.arg)}}}(e,r,new B(i||[])),!0),a}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=c;var d={};function p(){}function h(){}function f(){}var m={};u(m,o,(function(){return this}));var A=Object.getPrototypeOf,g=A&&A(A(I([])));g&&g!==n&&r.call(g,o)&&(m=g);var y=f.prototype=p.prototype=Object.create(m);function v(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==_(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(d).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;u(this,"_invoke",(function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}),!0)}function x(e,n){var r=n.method,i=e.i[r];if(i===t)return n.delegate=null,"throw"===r&&e.i.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var o=l(i,e.i,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,d;var a=o.arg;return a?a.done?(n[e.r]=a.value,n.next=e.n,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,d):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function C(t){this.tryEntries.push(t)}function w(e){var n=e[4]||{};n.type="normal",n.arg=t,e[4]=n}function B(t){this.tryEntries=[[-1]],t.forEach(C,this),this.reset(!0)}function I(e){if(null!=e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}throw new TypeError(_(e)+" is not iterable")}return h.prototype=f,u(y,"constructor",f),u(f,"constructor",h),u(f,s,h.displayName="GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,u(t,s,"GeneratorFunction")),t.prototype=Object.create(y),t},e.awrap=function(t){return{__await:t}},v(b.prototype),u(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},v(y),u(y,s,"Generator"),u(y,o,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function t(){for(;n.length;)if((r=n.pop())in e)return t.value=r,t.done=!1,t;return t.done=!0,t}},e.values=I,B.prototype={constructor:B,reset:function(e){if(this.prev=this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(w),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0][4];if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(t){a.type="throw",a.arg=e,n.next=t}for(var i=n.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o[4],s=this.prev,u=o[1],c=o[2];if(-1===o[0])return r("end"),!1;if(!u&&!c)throw Error("try statement without catch or finally");if(null!=o[0]&&o[0]<=s){if(s<u)return this.method="next",this.arg=t,r(u),!0;if(s<c)return r(c),!1}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var i=r;break}}i&&("break"===t||"continue"===t)&&i[0]<=e&&e<=i[2]&&(i=null);var o=i?i[4]:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i[2],d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[2]===t)return this.complete(n[4],n[3]),w(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n[0]===t){var r=n[4];if("throw"===r.type){var i=r.arg;w(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={i:I(e),r:n,n:r},"next"===this.method&&(this.arg=t),d}},e}function $(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function K(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){$(o,r,i,a,s,"next",t)}function s(t){$(o,r,i,a,s,"throw",t)}a(void 0)}))}}function tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,et(r.key),r)}}function et(t){var e=function(t){if("object"!=_(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_(e)?e:e+""}var nt=function(){return t=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.synth=null,this.initialized=!1,this.initializing=!1,this.isLoadingPreset=!1,this.paramUpdateTimeout=null,this.uiElements={},this.presets=this.getDefaultPresets(),this.loadPreset=this.loadPreset.bind(this),this.playTestSound=this.playTestSound.bind(this),this.initAudio=this.initAudio.bind(this),this.initialize=this.initialize.bind(this),this.onSliderChange=this.onSliderChange.bind(this),this.updateSynthFromSlider=this.updateSynthFromSlider.bind(this),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function(){return e.initialize()})):this.initialize()},e=[{key:"initialize",value:(o=K(J().mark((function t(){var e=this;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{this.setupUIElements(),this.setupEventListeners(),this.uiElements.startBtn.addEventListener("click",(function(){return e.initAudio()})),this.uiElements.testBtn.addEventListener("click",(function(){return e.playTestSound()})),this.updateStatus("Click Initialize to begin","#4facfe"),C.emit("ui:ready")}catch(t){console.error("Error initializing controller:",t),this.updateStatus("Initialization failed. Check console for errors.","#e74c3c")}case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"initAudio",value:(i=K(J().mark((function t(){var e,n,r,i,o=this;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initializing){t.next=2;break}return t.abrupt("return");case 2:if(this.initializing=!0,t.prev=3,this.updateStatus("Initializing audio...","#4facfe"),console.log("Browser info:",{userAgent:navigator.userAgent,secureContext:window.isSecureContext,hasAudioContext:!(!window.AudioContext&&!window.webkitAudioContext),location:window.location.href}),!1!==window.isSecureContext){t.next=8;break}throw new Error("Page must be served over HTTPS or localhost to use Web Audio API");case 8:if(window.AudioContext||window.webkitAudioContext){t.next=11;break}throw new Error("Web Audio API is not supported in this browser");case 11:if(console.log("Browser info:",{userAgent:navigator.userAgent,secureContext:window.isSecureContext,hasAudioContext:!(!window.AudioContext&&!window.webkitAudioContext),location:window.location.href}),!1!==window.isSecureContext){t.next=14;break}throw new Error("Page must be served over HTTPS or localhost to use Web Audio API");case 14:if(window.AudioContext||window.webkitAudioContext){t.next=16;break}throw new Error("Web Audio API is not supported in this browser");case 16:if(console.log("Creating DogSynthesizer instance..."),this.synth=new W,console.log("AudioContext state:",this.synth.audioContext.state),e=function(){var t=K(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"suspended"!==o.synth.audioContext.state){t.next=5;break}return console.log("AudioContext is suspended, resuming..."),t.next=5,o.synth.audioContext.resume();case 5:console.log("AudioContext state after resume:",o.synth.audioContext.state),"running"===o.synth.audioContext.state&&(o.initialized=!0,o.initializing=!1,o.uiElements.testBtn.disabled=!1,o.uiElements.startBtn.disabled=!0,o.updateStatus("Audio ready! Click Test or adjust parameters.","#2ecc71"),o.uiElements.testBtn.disabled=!1,o.uiElements.playBtn&&(o.uiElements.playBtn.disabled=!1),setTimeout((function(){o.playTestSound()}),300)),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("Error handling audio context state:",t.t0),o.updateStatus("Error initializing audio. Try clicking Initialize again.","#e74c3c"),o.initializing=!1;case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=K(J().mark((function t(){return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.removeEventListener("click",n),document.removeEventListener("keydown",n),document.removeEventListener("touchstart",n),t.prev=3,t.next=6,e();case 6:t.next=13;break;case 8:t.prev=8,t.t0=t.catch(3),console.error("Error in user interaction handler:",t.t0),o.updateStatus("Error enabling audio. Try refreshing the page.","#e74c3c"),o.initializing=!1;case 13:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(){return t.apply(this,arguments)}}(),"running"!==this.synth.audioContext.state){t.next=26;break}return t.next=24,e();case 24:t.next=30;break;case 26:this.updateStatus("Click or tap anywhere to enable audio...","#f39c12"),document.addEventListener("click",n,{once:!0}),document.addEventListener("keydown",n,{once:!0}),document.addEventListener("touchstart",n,{once:!0});case 30:t.next=39;break;case 32:t.prev=32,t.t0=t.catch(3),console.error("Error initializing audio:",t.t0),i="Error initializing audio: "+t.t0.message,t.t0.message.includes("secure context")?i="Audio requires a secure context (HTTPS or localhost)":t.t0.message.includes("Web Audio API")&&(i="Web Audio API not supported in this browser"),this.updateStatus(i,"#e74c3c"),console.log("Browser info:",{userAgent:navigator.userAgent,secureContext:window.isSecureContext,hasAudioContext:!(!window.AudioContext&&!window.webkitAudioContext),audioContextState:null===(r=this.synth)||void 0===r||null===(r=r.audioContext)||void 0===r?void 0:r.state});case 39:case"end":return t.stop()}}),t,this,[[3,32]])}))),function(){return i.apply(this,arguments)})},{key:"setupUIElements",value:function(){var t=this;this.uiElements={startBtn:document.getElementById("startBtn"),testBtn:document.getElementById("testBtn"),playBtn:document.getElementById("playBtn"),status:document.getElementById("status"),sliders:{}},document.querySelectorAll('input[type="range"]').forEach((function(e){t.uiElements.sliders[e.id]=e;var n=document.getElementById("".concat(e.id,"-value"));n&&(n.textContent=e.value)})),this.uiElements.presetBtns=document.querySelectorAll(".preset-btn")}},{key:"setupEventListeners",value:function(){var t=this;Object.entries(this.uiElements.sliders).forEach((function(e){var n=H(e,2),r=n[0];n[1].addEventListener("input",(function(e){return t.onSliderChange(r,e.target.value)}))})),this.uiElements.presetBtns.forEach((function(e){e.addEventListener("click",(function(){return t.loadPreset(e.dataset.preset)}))})),this.uiElements.playBtn&&this.uiElements.playBtn.addEventListener("click",(function(){return t.playTestSound()}))}},{key:"updateSynthFromSlider",value:function(t,e){var n=this;if(this.initialized&&this.synth&&!this.isLoadingPreset){var r=parseFloat(e);this.paramUpdateTimeout&&clearTimeout(this.paramUpdateTimeout),this.paramUpdateTimeout=setTimeout((function(){var e={pitch:"pitch",jitter:"jitter",shimmer:"shimmer",breathiness:"breathiness",noiseColor:"noiseColor",f1:"formants",f2:"formants",f3:"formants","amp-attack":"amp-attack","amp-decay":"amp-decay","amp-sustain":"amp-sustain","amp-release":"amp-release"}[t];if(e)try{if(t.startsWith("f")){var i=parseInt(t[1])-1,o=function(t){return function(t){if(Array.isArray(t))return X(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Z(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n.synth.params.formants);o[i]=r,n.synth.setParam("formants",o)}else n.synth.setParam(e,r)}catch(t){console.error("Error updating parameter:",t)}}),16)}}},{key:"onSliderChange",value:function(t,e){if(this.initialized&&!this.isLoadingPreset){var n=parseFloat(e),r=document.getElementById("".concat(t,"-value"));r&&(r.textContent=n.toFixed(2)),this.updateSynthFromSlider(t,n)}}},{key:"loadPreset",value:function(t){var e=this;if(this.initialized){var n=this.presets[t];if(n){this.paramUpdateTimeout&&(clearTimeout(this.paramUpdateTimeout),this.paramUpdateTimeout=null);try{this.isLoadingPreset=!0;var r=[];Object.entries(n).forEach((function(t){var n,i=H(t,2),o=i[0],a=i[1],s=null===(n=e.uiElements.sliders)||void 0===n?void 0:n[o];if(s){s.value=a;var u=document.getElementById("".concat(o,"-value"));u&&(u.textContent=parseFloat(a).toFixed(2)),r.push({id:o,value:a})}})),r.forEach((function(t){var n=t.id,r=t.value;e.updateSynthFromSlider(n,r)})),this.updateStatus("Loaded preset: ".concat(t),"#9b59b6"),this.playTestSound()}catch(t){console.error("Error loading preset:",t),this.updateStatus("Error loading preset","#e74c3c")}finally{this.isLoadingPreset=!1}}else console.warn("Preset '".concat(t,"' not found"))}else this.updateStatus("Please initialize audio first","#e67e22")}},{key:"playTestSound",value:(r=K(J().mark((function t(){var e;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.synth){t.next=4;break}return console.warn("Cannot play test sound: No synth instance"),this.updateStatus("Audio not ready. Click Initialize first.","#e74c3c"),t.abrupt("return");case 4:if(t.prev=4,"suspended"!==(e=this.synth.audioContext).state){t.next=10;break}return console.log("AudioContext suspended, attempting to resume..."),t.next=10,e.resume();case 10:if("running"===e.state){t.next=14;break}return console.warn("AudioContext could not be resumed, state:",e.state),this.updateStatus("Audio not ready. Try clicking the Play button again.","#e67e22"),t.abrupt("return");case 14:console.log("Playing test sound with params:",{pitch:this.synth.params.pitch,state:e.state}),this.synth.playNote(1,.7),this.updateStatus("Playing test sound...","#2ecc71"),t.next=23;break;case 19:t.prev=19,t.t0=t.catch(4),console.error("Error playing test sound:",t.t0),this.updateStatus("Error playing sound: "+t.t0.message,"#e74c3c");case 23:case"end":return t.stop()}}),t,this,[[4,19]])}))),function(){return r.apply(this,arguments)})},{key:"initializeAudio",value:(n=K(J().mark((function t(){var e=this;return J().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.synth){t.next=5;break}return console.log("Audio already initialized, playing test sound..."),t.next=4,this.playTestSound();case 4:return t.abrupt("return");case 5:return this.updateStatus("Initializing audio...","#f39c12"),t.prev=6,this.synth=new W,t.next=10,new Promise((function(t){var n=function(){e.synth.audioContext&&"running"===e.synth.audioContext.state?t():setTimeout(n,50)};n()}));case 10:return t.next=12,this.playTestSound();case 12:this.updateStatus("Audio initialized!","#2ecc71"),t.next=20;break;case 15:throw t.prev=15,t.t0=t.catch(6),console.error("Error initializing audio:",t.t0),this.updateStatus("Error initializing audio: "+t.t0.message,"#e74c3c"),t.t0;case 20:case"end":return t.stop()}}),t,this,[[6,15]])}))),function(){return n.apply(this,arguments)})},{key:"getDefaultPresets",value:function(){return{bark:{pitch:220,jitter:.05,shimmer:.08,breathiness:.1,noiseColor:1e3,f1:650,f2:1100,f3:2200,"amp-attack":.01,"amp-decay":.05,"amp-sustain":.6,"amp-release":.2},whine:{pitch:450,jitter:.03,shimmer:.04,breathiness:.15,noiseColor:1200,f1:800,f2:1600,f3:2800,"amp-attack":.01,"amp-decay":.1,"amp-sustain":.7,"amp-release":.3},growl:{pitch:120,jitter:.1,shimmer:.12,breathiness:.2,noiseColor:800,f1:500,f2:900,f3:1800,"amp-attack":.05,"amp-decay":.2,"amp-sustain":.8,"amp-release":.4}}}},{key:"updateStatus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#4facfe";this.uiElements.statusEl&&(this.uiElements.statusEl.textContent=t,this.uiElements.statusEl.style.color=e),console.log("[Status] ".concat(t))}},{key:"logDebug",value:function(t){if(this.uiElements.debugEl){var e=document.createElement("div");for(e.textContent="[".concat((new Date).toISOString(),"] ").concat(t),this.uiElements.debugEl.prepend(e);this.uiElements.debugEl.children.length>10;)this.uiElements.debugEl.removeChild(this.uiElements.debugEl.lastChild)}console.debug("[Debug] ".concat(t))}}],e&&tt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o}();"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(function(){new nt})):new nt,window.app={SynthController:nt}})();
//# sourceMappingURL=app.8013ec9c40bfd05e4ab9.bundle.js.map